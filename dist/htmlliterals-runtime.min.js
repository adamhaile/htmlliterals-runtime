!function(e){var n={},t="Html";e(function(e,t,o){if(n.hasOwnProperty(e))throw new Error("define: cannot redefine module "+e);n[e]=o.apply(null,t.map(function(t){if(!n.hasOwnProperty(t))throw new Error("define: module "+t+" required by "+e+" has not been defined.");return n[t]}))}),"object"==typeof module&&"object"==typeof module.exports?module.exports=n[t]:"function"==typeof define?define([],function(){return n[t]}):this[t]=n[t]}(function(e){"use strict";e("domlib",[],function(){function e(){var e=document.createElement("div");return e.innerHTML='<div contentEditable="true"></div>',e.children[0].isContentEditable===!0}function n(){t.isContentEditable=function(e){var n=e.getAttribute("contentEditable");return"true"===n||""===n}}var t={addEventListener:function(e,n,t){e.addEventListener(n,t,!1)},removeEventListener:function(e,n,t){e.removeEventListener(n,t)},classListContains:function(e,n){return e.classList.contains(n)},classListAdd:function(e,n){return e.classList.add(n)},classListRemove:function(e,n){return e.classList.remove(n)},isContentEditable:function(e){return e.isContentEditable},isAttachedToDocument:function(e){return 0===(1&document.compareDocumentPosition(e))}};return e()||n(),t}),e("Html",["domlib"],function(e){return{exec:function(e){e()},cleanup:function(){},domlib:e}}),e("Html.insert",["Html"],function(e){var n=11,t=3;e.insert=function o(i,r,a){function s(n){n instanceof Function?e.exec(function(){s(n())}):o(n)}function o(e){if(f=i.parentNode,!f)throw new Error("@insert can only be used on a node that has a parent node. \nNode ``"+i+"'' is currently unattached to a parent.");if(a.parentNode!==f)throw new Error("@insert requires that the inserted nodes remain sibilings \nof the original node.  The DOM has been modified such that this is \nno longer the case.");m=a,c(e),u(m,i)}function c(e){var o=m.nextSibling;null===e||void 0===e||(e.nodeType===n?0===e.childNodes.length&&e.originalNodes?l(e.originalNodes):(f.insertBefore(e,o),m=o.previousSibling):e.nodeType?(o!==e&&(o.nextSibling===e&&o!==e.nextSibling?f.removeChild(o):f.insertBefore(e,o)),m=e):Array.isArray(e)?l(e):(e=e.toString(),o.nodeType!==t?m=f.insertBefore(document.createTextNode(e),o):(o.data!==e&&(o.data=e),m=o)))}function l(e){var n,t,o;for(n=0,t=e.length;t>n;n++)c(e[n]),o&&3==o.nodeType&&o.nextSibling!==i&&3===o.nextSibling.nodeType&&f.insertBefore(document.createTextNode(" "),o.nextSibling),o=i.previousSibling}function u(e,n){if(e!==n)for(var t=e.nextSibling;t!==n;)f.removeChild(t),t=e.nextSibling}function d(e){return e.parentNode.insertBefore(document.createTextNode(""),e)}a=a||d(i);var f,m;return s(r),a}}),e("Html.attr",["Html"],function(e){e.attr=function(e,n){return function(t){t.setAttribute(e,n)}}}),e("Html.class",["Html","domlib"],function(e,n){e.class=function(e,t,o){return arguments.length<3&&(o=t,t=null),function(i,r){if(void 0===i.className)throw new Error("@class can only be applied to an element that accepts class names. \nElement ``"+i+"'' does not. Perhaps you applied it to the wrong node?");if(o===r)return r;var a=n.classListContains(i,e),s=t&&n.classListContains(i,t);return o?(a||n.classListAdd(i,e),t&&s&&n.classListRemove(i,t)):(a&&n.classListRemove(i,e),t&&!s&&n.classListAdd(i,t)),o}}}),e("Html.focus",["Html","domlib"],function(e,n){function t(){a=!1;var e,t,s=0>i?o.textContent.length+i+1:i,c=0>r?o.textContent.length+r+1:r;o.focus(),isNaN(s)||(o.setSelectionRange?o.setSelectionRange(s,c):o.createTextRange?(e=o.createTextRange(),e.moveEnd("character",c),e.moveStart("character",s),e.select()):n.isContentEditable(o)&&o.childNodes.length>0&&(e=document.createRange(),e.setStart(o.childNodes[0],s),e.setEnd(o.childNodes[0],c),t=window.getSelection(),t.removeAllRanges(),t.addRange(e)))}var o=null,i=0/0,r=0/0,a=!1;e.focus=function(e,n,s){return n=arguments.length>1?n:0/0,s=arguments.length>2?s:n,function(c){if(!c.focus)throw new Error("@focus can only be applied to an element that has a .focus() method, like <input>, <select>, <textarea>, etc.");e?(o=c,i=n,r=s,a||window.requestAnimationFrame(t)):c.blur()}}}),e("Html.onkey",["Html","domlib"],function(e,n){e.onkey=function(o,i,r){function a(e){return e.keyCode!==c||l&&!e[l]||r(e),!0}arguments.length<3&&(r=i,i="down");var s=o.toLowerCase().split("-",2),c=t[s[s.length-1]],l=s.length>1?s[0]+"Key":null;if(void 0===c)throw new Error("@Html.onkey: unrecognized key identifier '"+o+"'");if("function"!=typeof r)throw new Error("@Html.onkey: must supply a function to call when the key is entered");return function(t){n.addEventListener(t,"key"+i,a),e.cleanup(t,function(){n.removeEventListener(t,"key"+i,a)})}};var t={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,"break":19,capslock:20,esc:27,escape:27,space:32,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,prntscrn:44,insert:45,"delete":46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,winkey:91,winmenu:93,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,",":188,"<":188,".":190,">":190,"/":191,"?":191,"`":192,"~":192,"[":219,"{":219,"\\":220,"|":220,"]":221,"}":221,"'":222,'"':222}})});
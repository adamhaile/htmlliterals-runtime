!function(e){var n={},t="Html";e(function(e,t,o){if(n.hasOwnProperty(e))throw new Error("define: cannot redefine module "+e);n[e]=o.apply(null,t.map(function(t){if(!n.hasOwnProperty(t))throw new Error("define: module "+t+" required by "+e+" has not been defined.");return n[t]}))}),"object"==typeof module&&"object"==typeof module.exports?module.exports=n[t]:"function"==typeof define?define([],function(){return n[t]}):this[t]=n[t]}(function(e){"use strict";e("domlib",[],function(){return{addEventListener:function(e,n,t){e.addEventListener(n,t,!1)},removeEventListener:function(e,n,t){e.removeEventListener(n,t)},classListContains:function(e,n){return e.classList.contains(n)},classListAdd:function(e,n){return e.classList.add(n)},classListRemove:function(e,n){return e.classList.remove(n)}}}),e("parse",[],function(){function e(e){var o=n.exec(e);return o&&t[o[1].toLowerCase()]||"div"}var n=/<(\w+)/,t={li:"ul",td:"tr",th:"tr",tr:"tbody",thead:"table",tbody:"table",dd:"dl",dt:"dl",head:"html",body:"html"};return function(n){var t,o,r=document.createElement(e(n));if(r.innerHTML=n,t=r.childNodes.length,0===t){if(""===n)return document.createTextNode("");throw new Error("HTML parse failed for: "+n)}if(1===t)return r.childNodes[0];for(o=document.createDocumentFragment();0!==r.childNodes.length;)o.appendChild(r.childNodes[0]);return o}}),e("cachedParse",["parse"],function(e){var n={};return function(t,o){var r=n[t];return void 0===r&&(r=e(o),n[t]=r),r.cloneNode(!0)}}),e("Html",["parse","cachedParse","domlib"],function(e,n,t){function o(t,o){void 0===t.nodeType&&(t=o?n(t,o):e(t)),this.node=t}return o.prototype={child:function r(e,n){var t,r,i=this.node.childNodes,d=e.length,s=new Array(d);if(void 0===i)throw new Error("Shell.childNodes can only be applied to a node with a \n.childNodes collection.  Node ``"+this.node+"'' does not have one. \nPerhaps you applied it to the wrong node?");for(t=0;d>t;t++){if(r=i[e[t]],!r)throw new Error("Node ``"+this.node+"'' does not have a child at index "+t+".");s[t]=new o(r)}return n(s),this},property:function(e){return e(this.node),this}},o.addDirective=function(e,n){o.prototype[e]=function(e){return o.runDirective(n,this.node,e),this}},o.runDirective=function(e,n,t){t(e(n))},o.cleanup=function(){},o.domlib=t,o}),e("directives.class",["Html"],function(e){e.addDirective("class",function(n){if(void 0===n.className)throw new Error("@class can only be applied to an element that accepts class names. \nElement ``"+n+"'' does not. Perhaps you applied it to the wrong node?");return function(t,o,r){arguments.length<3&&(r=o,o=null);var i=e.domlib.classListContains(n,t),d=o&&e.domlib.classListContains(n,o);r?(i||e.domlib.classListAdd(n,t),o&&d&&e.domlib.classListRemove(n,o)):(i&&e.domlib.classListRemove(n,t),o&&!d&&e.domlib.classListAdd(n,o))}})}),e("directives.focus",["Html"],function(e){e.addDirective("focus",function(e){return function(n){n?e.focus():e.blur()}})}),e("directives.insert",["Html"],function(e){e.addDirective("insert",function(e){function n(e){var n=s.nextSibling;null===e||void 0===e||(e.nodeType?(n!==e&&i.insertBefore(e,n),s=e):Array.isArray(e)?t(e):(e=e.toString(),s=3!==n.nodeType||n.data!==e?i.insertBefore(document.createTextNode(e),n):n))}function t(t){var o,r,d;for(o=0,r=t.length;r>o;o++)n(t[o]),d&&3==d.nodeType&&d.nextSibling!==e&&3===d.nextSibling.nodeType&&i.insertBefore(document.createTextNode(" "),d.nextSibling),d=e.previousSibling}function o(e,n){for(var t=e.nextSibling;t!==n;)i.removeChild(t),t=e.nextSibling}function r(e){return i.insertBefore(document.createTextNode(""),e)}var i,d,s;return function(t){if(i=e.parentNode,!i)throw new Error("@insert can only be used on a node that has a parent node. \nNode ``"+e+"'' is currently unattached to a parent.");if(d){if(d.parentNode!==i)throw new Error("@insert requires that the inserted nodes remain sibilings \nof the original node.  The DOM has been modified such that this is \nno longer the case.")}else d=r(e);s=d,n(t),o(s,e)}})}),e("directives.onkey",["Html"],function(e){e.addDirective("onkey",function(t){return function(o,r,i){function d(e){return e.keyCode===s&&i(),!0}arguments.length<3&&(i=r,r="down");var s=n[o.toLowerCase()];if(void 0===s)throw new Error("@onkey: unrecognized key identifier '"+o+"'");if("function"!=typeof i)throw new Error("@onkey: must supply a function to call when the key is entered");e.domlib.addEventListener(t,"key"+r,d),e.cleanup(t,function(){e.domlib.removeEventListener(t,"key"+r,d)})}});var n={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,"break":19,capslock:20,esc:27,escape:27,space:32,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,prntscrn:44,insert:45,"delete":46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,winkey:91,winmenu:93,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,",":188,"<":188,".":190,">":190,"/":191,"?":191,"`":192,"~":192,"[":219,"{":219,"\\":220,"|":220,"]":221,"}":221,"'":222,'"':222}})});
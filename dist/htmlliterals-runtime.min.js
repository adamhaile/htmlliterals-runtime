!function(e){var t={},n="Html";e(function(e,n,o){if(t.hasOwnProperty(e))throw new Error("define: cannot redefine module "+e);t[e]=o.apply(null,n.map(function(n){if(!t.hasOwnProperty(n))throw new Error("define: module "+n+" required by "+e+" has not been defined.");return t[n]}))}),"object"==typeof module&&"object"==typeof module.exports?module.exports=t[n]:"function"==typeof define?define([],function(){return t[n]}):this[n]=t[n]}(function(e){"use strict";e("domlib",[],function(){function e(){var e=document.createElement("div");return e.innerHTML='<div contentEditable="true"></div>',e.children[0].isContentEditable===!0}function t(){n.isContentEditable=function(e){var t=e.getAttribute("contentEditable");return"true"===t||""===t}}var n={addEventListener:function(e,t,n){e.addEventListener(t,n,!1)},removeEventListener:function(e,t,n){e.removeEventListener(t,n)},classListContains:function(e,t){return e.classList.contains(t)},classListAdd:function(e,t){return e.classList.add(t)},classListRemove:function(e,t){return e.classList.remove(t)},isContentEditable:function(e){return e.isContentEditable},isAttachedToDocument:function(e){return 0===(1&document.compareDocumentPosition(e))}};return e()||t(),n}),e("parse",[],function(){function e(e){var o=t.exec(e),r=o&&n[o[1].toLowerCase()]||"div";return"svg"===r?document.createElementNS("http://www.w3.org/2000/svg",r):document.createElement(r)}var t=/<(\w+)/,n={li:"ul",td:"tr",th:"tr",tr:"tbody",thead:"table",tbody:"table",dd:"dl",dt:"dl",head:"html",body:"html",svg:"svg",g:"svg",circle:"svg",elipse:"svg",rect:"svg",text:"svg",polyline:"svg",polygon:"svg",line:"svg",path:"svg"};return function(t){var n,o,r=e(t);if(r.innerHTML=t,n=r.childNodes.length,0===n){if(""===t)return document.createTextNode("");throw new Error("HTML parse failed for: "+t)}if(1===n)return r.childNodes[0];for(o=document.createDocumentFragment();0!==r.childNodes.length;)o.appendChild(r.childNodes[0]);return o.originalNodes=Array.prototype.slice.apply(o.childNodes),o}}),e("cachedParse",["parse"],function(e){var t={},n=11;return function(o,r){var i,a=t[o];return void 0===a&&(a=e(r),t[o]=a),i=a.cloneNode(!0),i.nodeType===n&&(i.originalNodes=Array.prototype.slice.call(i.childNodes)),i}}),e("Html",["parse","cachedParse","domlib"],function(e,t,n){function o(n,o){void 0===n.nodeType&&(n=o?t(n,o):e(n)),this.node=n}return o.prototype={child:function r(e,t){var n,r,i=this.node.childNodes,a=e.length,s=new Array(a);if(void 0===i)throw new Error("Shell.childNodes can only be applied to a node with a \n.childNodes collection.  Node ``"+this.node+"'' does not have one. \nPerhaps you applied it to the wrong node?");for(n=0;a>n;n++){if(r=i[e[n]],!r)throw new Error("Node ``"+this.node+"'' does not have a child at index "+n+".");s[n]=new o(r)}return t(s),this},property:function(e){return e(this.node),this},mixin:function(e){return e()(this.node),this}},o.cleanup=function(){},o.domlib=n,o}),e("Html.insert",["Html"],function(e){var t=11,n=3;e.prototype.insert=function o(e){function r(e){e instanceof Function?l.mixin(function(){return function(){r(e())}}):o(e)}function o(e){if(u=c.parentNode,!u)throw new Error("@insert can only be used on a node that has a parent node. \nNode ``"+c+"'' is currently unattached to a parent.");if(f.parentNode!==u)throw new Error("@insert requires that the inserted nodes remain sibilings \nof the original node.  The DOM has been modified such that this is \nno longer the case.");h=f,i(e),s(h,c)}function i(e){var o=h.nextSibling;null===e||void 0===e||(e.nodeType===t?0===e.childNodes.length&&e.originalNodes?a(e.originalNodes):(u.insertBefore(e,o),h=o.previousSibling):e.nodeType?(o!==e&&(o.nextSibling===e&&o!==e.nextSibling?u.removeChild(o):u.insertBefore(e,o)),h=e):Array.isArray(e)?a(e):(e=e.toString(),o.nodeType!==n?h=u.insertBefore(document.createTextNode(e),o):(o.data!==e&&(o.data=e),h=o)))}function a(e){var t,n,o;for(t=0,n=e.length;n>t;t++)i(e[t]),o&&3==o.nodeType&&o.nextSibling!==c&&3===o.nextSibling.nodeType&&u.insertBefore(document.createTextNode(" "),o.nextSibling),o=c.previousSibling}function s(e,t){if(e!==t)for(var n=e.nextSibling;n!==t;)u.removeChild(n),n=e.nextSibling}function d(e){return u.insertBefore(document.createTextNode(""),e)}var l=this,c=this.node,u=c.parentNode,f=d(c),h=f;return r(e),this}}),e("Html.attr",["Html"],function(e){e.attr=function(e,t){return function(n){n.setAttribute(e,t)}}}),e("Html.class",["Html"],function(e){e.class=function(t,n,o){return arguments.length<3&&(o=n,n=null),function(r,i){if(void 0===r.className)throw new Error("@class can only be applied to an element that accepts class names. \nElement ``"+r+"'' does not. Perhaps you applied it to the wrong node?");if(o===i)return i;var a=e.domlib.classListContains(r,t),s=n&&e.domlib.classListContains(r,n);return o?(a||e.domlib.classListAdd(r,t),n&&s&&e.domlib.classListRemove(r,n)):(a&&e.domlib.classListRemove(r,t),n&&!s&&e.domlib.classListAdd(r,n)),o}}}),e("Html.focus",["Html"],function(e){function t(){i=!1;var t,a,s=0>o?n.textContent.length+o+1:o,d=0>r?n.textContent.length+r+1:r;n.focus(),isNaN(s)||(n.setSelectionRange?n.setSelectionRange(s,d):n.createTextRange?(t=n.createTextRange(),t.moveEnd("character",d),t.moveStart("character",s),t.select()):e.domlib.isContentEditable(n)&&n.childNodes.length>0&&(t=document.createRange(),t.setStart(n.childNodes[0],s),t.setEnd(n.childNodes[0],d),a=window.getSelection(),a.removeAllRanges(),a.addRange(t)))}var n=null,o=0/0,r=0/0,i=!1;e.focus=function(e,a,s){return a=arguments.length>1?a:0/0,s=arguments.length>2?s:a,function(d){if(!d.focus)throw new Error("@focus can only be applied to an element that has a .focus() method, like <input>, <select>, <textarea>, etc.");e?(n=d,o=a,r=s,i||window.requestAnimationFrame(t)):d.blur()}}}),e("Html.onkey",["Html"],function(e){e.onkey=function(n,o,r){function i(e){return e.keyCode!==s||d&&!e[d]||r(e),!0}arguments.length<3&&(r=o,o="down");var a=n.toLowerCase().split("-",2),s=t[a[a.length-1]],d=a.length>1?a[0]+"Key":null;if(void 0===s)throw new Error("@Html.onkey: unrecognized key identifier '"+n+"'");if("function"!=typeof r)throw new Error("@Html.onkey: must supply a function to call when the key is entered");return function(t){e.domlib.addEventListener(t,"key"+o,i),e.cleanup(t,function(){e.domlib.removeEventListener(t,"key"+o,i)})}};var t={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,"break":19,capslock:20,esc:27,escape:27,space:32,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,prntscrn:44,insert:45,"delete":46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,winkey:91,winmenu:93,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,",":188,"<":188,".":190,">":190,"/":191,"?":191,"`":192,"~":192,"[":219,"{":219,"\\":220,"|":220,"]":221,"}":221,"'":222,'"':222}})});
!function(e){var n,t={},r="htmlliterals";if(e(function(e,n,r){if(t.hasOwnProperty(e))throw new Error("define: cannot redefine module "+e);t[e]=r.apply(null,n.map(function(n){if(!t.hasOwnProperty(n))throw new Error("define: module "+n+" required by "+e+" has not been defined.");return t[n]}))}),"object"==typeof module&&"object"==typeof module.exports)module.exports=t.export;else if("function"==typeof define)define([],function(){return t.export});else if("undefined"!=typeof this[r])for(n in t.export)this[r][n]=t.export[n];else this[r]=t.export}(function(e){"use strict";e("domlib",[],function(){return{addEventListener:function(e,n,t){e.addEventListener(n,t,!1)},removeEventListener:function(e,n,t){e.removeEventListener(n,t)},classListContains:function(e,n){return e.classList.contains(n)},classListAdd:function(e,n){return e.classList.add(n)},classListRemove:function(e,n){return e.classList.remove(n)}}}),e("parse",[],function(){function e(e){var r=n.exec(e);return r&&t[r[1].toLowerCase()]||"div"}var n=/<(\w+)/,t={li:"ul",td:"tr",th:"tr",tr:"tbody",thead:"table",tbody:"table",dd:"dl",dt:"dl",head:"html",body:"html"};return function(n){var t,r,o=document.createElement(e(n));if(o.innerHTML=n,t=o.childNodes.length,0===t){if(""===n)return document.createTextNode("");throw new Error("HTML parse failed for: "+n)}if(1===t)return o.childNodes[0];for(r=document.createDocumentFragment();0!==o.childNodes.length;)r.appendChild(o.childNodes[0]);return r}}),e("cachedParse",["parse"],function(e){var n={};return function(t,r){var o=n[t];return void 0===o&&(o=e(r),n[t]=o),o.cloneNode(!0)}}),e("Shell",["parse","cachedParse"],function(e,n){function t(t,r){void 0===t.nodeType&&(t=r?n(t,r):e(t)),this.node=t}return t.prototype={childNodes:function(e,n){var r,o,i=this.node.childNodes,s=e.length,d=new Array(s);if(void 0===i)throw new Error("Shell.childNodes can only be applied to a node with a \n.childNodes collection.  Node ``"+this.node+"'' does not have one. \nPerhaps you applied it to the wrong node?");for(r=0;s>r;r++){if(o=i[e[r]],!o)throw new Error("Node ``"+this.node+"'' does not have a child at index "+r+".");d[r]=new t(o)}return n(d),this},property:function(e){return e(this.node),this}},t.addDirective=function(e,n){t.prototype[e]=function(e){return t.runDirective(n,this.node,e),this}},t.runDirective=function(e,n,t){t(e(n))},t.cleanup=function(){},t}),e("directives.class",["Shell","domlib"],function(e,n){e.addDirective("class",function(e){if(void 0===e.className)throw new Error("@class can only be applied to an element that accepts class names. \nElement ``"+e+"'' does not. Perhaps you applied it to the wrong node?");return function(t,r,o){arguments.length<3&&(o=r,r=null);var i=n.classListContains(e,t),s=r&&n.classListContains(e,r);o?(i||n.classListAdd(e,t),r&&s&&n.classListRemove(e,r)):(i&&n.classListRemove(e,t),r&&!s&&n.classListAdd(e,r))}})}),e("directives.focus",["Shell"],function(e){e.addDirective("focus",function(e){return function(n){n?e.focus():e.blur()}})}),e("directives.insert",["Shell"],function(e){e.addDirective("insert",function(e){function n(e,n){for(var t=e.nextSibling;t!==n;)r.removeChild(t),t=e.nextSibling}function t(e){return r.insertBefore(document.createTextNode(""),e)}var r,o,i;return function s(d){if(r=e.parentNode,!r)throw new Error("@insert can only be used on a node that has a parent node. \nNode ``"+e+"'' is currently unattached to a parent.");if(o){if(o.parentNode!==r)throw new Error("@insert requires that the inserted nodes remain sibilings \nof the original node.  The DOM has been modified such that this is \nno longer the case.")}else o=t(e);i=o,s(d),n(i,e)}})}),e("directives.onkey",["Shell","domlib"],function(e,n){e.addDirective("onkey",function(r){return function(o,i,s){function d(e){return e.keyCode===a&&s(),!0}arguments.length<3&&(s=i,i="down");var a=t[o.toLowerCase()];if(void 0===a)throw new Error("@onkey: unrecognized key identifier '"+o+"'");if("function"!=typeof s)throw new Error("@onkey: must supply a function to call when the key is entered");n.addEventListener(r,"key"+i,d),e.cleanup(r,function(){n.removeEventListener(r,"key"+i,d)})}});var t={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,"break":19,capslock:20,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,prntscrn:44,insert:45,"delete":46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,winkey:91,winmenu:93,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,",":188,"<":188,".":190,">":190,"/":191,"?":191,"`":192,"~":192,"[":219,"{":219,"\\":220,"|":220,"]":221,"}":221,"'":222,'"':222}}),e("export",["parse","cachedParse","Shell","domlib"],function(e,n,t,r){return{parse:e,cachedParse:n,Shell:t,domlib:r}})});